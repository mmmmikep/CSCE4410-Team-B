<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Access-Control-Allow-Origin" content="http://api.untappd.com">
<title>BierTime</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">

	function initialize(){

		var doneMessage = "Doneski";
		var errorMessage = "error";
			
	}
	
	function JSONgot(result){
	      
		  $("#label").html("Name:");
		  $("#test").html(result.results.user.user_name); 
		}
	


</script> 

<!--when run locally (ie, not on a webserver) there is an error for security reasons.  the URL json call should work when the page is live-->
<!--until then, we have a json test file to make sure the syntax for working with it works-->
<!--http://api.untappd.com/v3/user?key=d655538d2bbdcad2157eb187361e3b86&user=mmmmikep -->
<!--file:///C:/Users/KRISTINAKICKASS/jsontest.txt-->
<script type="text/javascript">

function beerclick(uid){
	var bidURL = "http://api.untappd.com/v3/beer_info?key=d655538d2bbdcad2157eb187361e3b86&bid="+uid;
	var backbutton = $("#results").html;
	
	$.getJSON(bidURL,function(result){
	$("#results").html('<a href="http:/www.untappd.com/beer/'+uid+'"">Untappd Image Link</a><br>');
       
	 $("#results").append('<p><img src="'+result.results.img+'" width="125" height="125""><br>'+result.results.name+'</p>'+
			 '<p>'+result.results.type+' - ABV: '+result.results.beer_abv+'%</p>'+
			 '<p>--'+result.results.brewery+'</p><br>'+
			 'My Rating: '+result.results.);
		
    
	});
  
  }


$(document).ready(function(){
	
	var url = "http://api.untappd.com/v3/user?key=d655538d2bbdcad2157eb187361e3b86&user=mmmmikep";
	var key = "key=d655538d2bbdcad2157eb187361e3b86&";
	var query = '&user=mmmmikep';
	
	var userAPIcall = "http://api.untappd.com/v3/user?key=d655538d2bbdcad2157eb187361e3b86&user=";
	var beerAPIcall = "http://api.untappd.com/v3/beer_search?key=d655538d2bbdcad2157eb187361e3b86&sort=count&q=";
	var beerInfocall = "http://api.untappd.com/v3/beer_info?key=d655538d2bbdcad2157eb187361e3b86&bid=";
	var untappdAPIcall="";
	
	
	
  $("#uName").click(function(){
	 $.getJSON(url,function(result){
      
	  $("#label").html("Name:");
	  $("#test").html(result.results.user.user_name); 
	});
  });
  
  $("#uNum").click(function(){
    $.getJSON(url,function(result){
      
	  $("#label").html("User ID:");
	  $("#test").html(result.results.user.uid);
    
	});
  });  
 
  $("#uLoc").click(function(){
    $.getJSON(url,function(result){

      $("#label").html("Location:");
	  $("#test").html(result.results.user.location);
    
	});
  });
  
  $("#bSrch").click(function(){
  <!--'http://api.untappd.com/v3/beer_search?key=d655538d2bbdcad2157eb187361e3b86&q=shiner' search syntax-->
	untappdAPIcall = beerAPIcall+$("#searchText").val();
    $.getJSON(untappdAPIcall,function(json){
		$("#results").html("Tap a beer for more info!");

      $.each(json.results, function(i,beer){
     // this is where we do what we want with the beer
      $("#results").append('<p onclick="beerclick('+beer.beer_id+')"><img id="beerpic"  title="'+beer.beer_id+'" src="'+beer.beer_stamp+'" widt="48" height="48" />'+beer.beer_name+'</p>');

		});
    
	});
  });
  
  $("#uSrch").click(function(){
		untappdAPIcall = userAPIcall+$("#searchTerm").val();
		url = untappdAPIcall;
	    $.getJSON(url,function(result){
		$("#label").html(url);
	    $("#test").html(result.results.user.user_name);
	    
		});
	  });
  
  $("#updateInfo").click(function(){
    $.getJSON(url,function(result){
      	  
	  if ($("#APIcall").val()==0) {
		 $("#label").html("Name:");
		  $("#test").html(result.results.user.user_name); 

			}
	
	if ($("#APIcall").val()==1) {
		 $("#label").html("User ID:");
		  $("#test").html(result.results.user.uid); 

			}
			
	if ($("#APIcall").val()==2) {
		 $("#label").html("Location:");
		  $("#test").html(result.results.user.location); 

			}
    
	});
  });
  
  
  
});
</script>		  


</head>
<body onload="initialize()">
<h1>Beer Search</h1>

<p id="label">Welcome!</p> 
<p id="test"></p><br>
<!-- <p>Enter a username to search for</p>
<input type="text" id="searchTerm">
<button id="uSrch">Search Users</button>
<br>
<select id="APIcall">
 <option id="uName" value="0"> User Name</option>
 <option id="uNum" value="1"> User Number</option>
 <option id="uLoc" value="2"> User Location</option>
</select><br><br>
<button id="updateInfo">Update</button><br><br>-->

<input type="text" id="searchText">
<button id="bSrch">Search Beers</button><br>
<div id="results">Enter a beer to search</div>





</body>
</html>